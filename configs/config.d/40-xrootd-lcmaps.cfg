# Configure LCMAPS authentication for XRootD installations
#
# **********************************************************************
# * WARNING: DO NOT EDIT THIS FILE.  IT WILL BE OVERWRITTEN ON UPGRADE *
# **********************************************************************
#
# This file is part of the xrootd-lcmaps package
#
# Instead of editing this file:
# - Override OSG-provided defaults by dropping a site-specific configuration
#   file in `/etc/xrootd/config.d` and prefixing it with "90-" or higher.
#

if named stash-cache
   # do nothing for unauth Stash Caches
else if named stash-origin
   # do nothing for unauth Stash Origins
else
   xrootd.seclib /usr/lib64/libXrdSec-4.so
   sec.protocol /usr/lib64 gsi -certdir:/etc/grid-security/certificates \
                       -cert:/etc/grid-security/xrd/xrdcert.pem \
                       -key:/etc/grid-security/xrd/xrdkey.pem \
                       -crl:1 \
                       -authzfun:libXrdLcmaps.so \
                       -authzfunparms:lcmapscfg=/etc/xrootd/lcmaps.cfg,loglevel=0,policy=authorize_only \
                       -gmapopt:10 -gmapto:0

   acc.authdb /etc/xrootd/auth_file
   ofs.authorize 1
fi
